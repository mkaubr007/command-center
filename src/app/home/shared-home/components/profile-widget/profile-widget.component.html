<div class="profile-widget">
  <div class="notification" [ngClass]="{'show' : openNotificationPannel}">
    <div class="icon-notification-bell" (click)="openNotification()">
      <div class="bell-badge" *ngIf="newNotificationCount && +newNotificationCount > 0">{{newNotificationCount}}</div>
    </div>
    <app-notification-panel *ngIf="openNotificationPannel" (click)="stopPropagation($event)"
      (closeNotificationPannel)="openNotificationPannel = false" class="app-notification-panel">
    </app-notification-panel>
  </div>
  <div class="avatar">
    <div class="dropdown">
      <div class="dropdown-selector dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        <div class="profile" *ngIf="profilePic; else initials" [ngStyle]="{
            'background-image':
              'url(' +
              (profilePic) +
              ')'
          }"></div>
        <ng-template #initials>
          <div class="initials">
            {{fullName | initials}}
          </div>
        </ng-template>
        <div class="icon-caret"></div>
      </div>
      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
        <div class="user-profile">
          <div class="name">{{ userName }}</div>
          <div class="role" [ngClass]="{ 'role-margins': userName?.length > 12 }">
            {{ userName?.length > 12 ? (userRole | ellipsis: 20) : userRole }}
          </div>
        </div>
        <div class="edit" (click)="showEditProfilePopup()">Edit profile</div>
        <ul class="dropdown-options">
          <li (click)="showChangePasswordPopup()">Change password</li>
          <li (click)="logout()">Logout</li>
        </ul>
      </div>
    </div>
  </div>
</div>
